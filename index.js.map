{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst loader = document.getElementById('loader');\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n  \nexport function createGallery(images) {\n    const markup = images\n      .map(\n        ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n       <li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n            <div class=\"info\">\n              <p><span class=\"label\">Likes</span><span class=\"value\">${likes}</span></p>\n              <p><span class=\"label\">Views</span><span class=\"value\">${views}</span></p>\n              <p><span class=\"label\">Comments</span><span class=\"value\">${comments}</span></p>\n              <p><span class=\"label\">Downloads</span><span class=\"value\">${downloads}</span></p>\n            </div>\n          </a>\n        </li>\n      `\n      )\n      .join('');\n    gallery.insertAdjacentHTML('beforeend', markup);\n    lightbox.refresh();\n};\n\nexport function clearGallery() {\n    gallery.innerHTML = '';\n};\n\nexport function showLoader() {\n    loader.classList.remove('is-hidden');\n};\n\nexport function hideLoader() {\n    loader.classList.add('is-hidden');\n};\n\nexport function showLoadMoreButton() {\n    loadMoreBtn.classList.remove('is-hidden');\n};\n\nexport function hideLoadMoreButton() {\n    loadMoreBtn.classList.add('is-hidden');\n};\n\n\n\n","import axios from \"axios\";\nimport { showLoader, hideLoader } from './render-functions';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '49539042-7a7029324b91a0a3f345412f4';\n\nexport async function getImagesByQuery(query, page = 1) {\n    const params = {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        safesearch: true, page,\n        per_image: 15,\n    };\n\n    try {\n        showLoader();\n        const response = await axios.get(BASE_URL, { params });\n        return response.data;\n    } catch (error) {\n        throw new Error('Failed to fetch images');\n    } finally {\n        hideLoader();\n    }\n}","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getImagesByQuery } from './js/pixabay-api';\nimport {\n  createGallery,\n  clearGallery,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n} from './js/render-functions';\n\nconst form = document.querySelector('.form');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet query = '';\nlet page = 1;\nlet totalPage = 0;\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n  query = event.target.elements['search-text'].value.trim();\n  page = 1;\n\n  if (!query) {\n    iziToast.error({\n      message: 'Empty input, enter a search value!',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  clearGallery();\n  hideLoadMoreButton();\n\n  try {\n    const data = await getImagesByQuery(query, page);\n    const { hits, totalHits } = data;\n\n    if (hits.length === 0) {\n      iziToast.error({\n        message: 'Sorry, no images match your query. Try again!',\n        position: 'topRight',\n      });\n      return;\n    }\n\n    createGallery(hits);\n    totalPage = Math.ceil(totalHits / 15);\n\n    if (page < totalPage) {\n      showLoadMoreButton();\n    }\n  } catch (error) {\n    iziToast.error({ message: 'Something went wrong', position: 'topRight' });\n  }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  page += 1;\n\n  try {\n    const data = await getImagesByQuery(query, page);\n    createGallery(data.hits);\n\n    scrollPage();\n\n    if (page >= totalPage) {\n      hideLoadMoreButton();\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    }\n  } catch (error) {\n    iziToast.error({\n      message: 'Failed to load more images',\n      position: 'topRight',\n    });\n  }\n});\n\n\nfunction scrollPage() {\n    const card = document.querySelector('.gallery-item');\n\n    if (card) {\n        const cardHeight = card.getBoundingClientRect().height;\n        window.scrollBy({ top: cardHeight * 2, behavior: 'smooth' });\n\n    };\n};"],"names":["gallery","loadMoreBtn","loader","lightbox","SimpleLightbox","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","BASE_URL","API_KEY","getImagesByQuery","query","page","params","axios","form","totalPage","event","iziToast","data","hits","totalHits","scrollPage","card","cardHeight"],"mappings":"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"}